@model List<MHDecora.Site.Domain.Entities.Banner>

@* <div id="carouselExampleIndicators" class="carousel slide mt-4" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#carouselExampleIndicators" data-slide-to="0" class="active"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
        <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
        @foreach(var item in Model)
        {
            <div class="carousel-item">
                <img src="@item.CaminhoImagem" class="d-block w-100" width="1200" height="400" alt="...">
            </div>
        }

    </div>
    <a class="carousel-control-prev" href="#carouselExampleIndicators" role="button" data-slide="prev">
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#carouselExampleIndicators" role="button" data-slide="next">
        <span class="sr-only">Next</span>
    </a>
</div> *@


<section class="slider-wrapper" id="home">
    @if (Model.Count() > 0)
    {
        <div class="slider-box active show">
            <div class="slider-image">
                @if (!string.IsNullOrEmpty(Model[0].Descricao))
                {
                    <a href="@Model[0].Descricao">
                        <img src="@Model[0].CaminhoImagem" alt="" />
                    </a>
                }
                else
                {
                    <a href="@Model[0].Descricao">
                        <img class="lazy" src="@Model[0].CaminhoImagem" alt="" />
                    </a>
                }
            </div>
        </div>
    }
    
    @if (Model.Count() > 1)
    {
        @for (var x = 1; x < Model.Count(); x++)
        {
            <div class="slider-box">
                <div class="slider-image">
                    @if (!string.IsNullOrEmpty(Model[x].Descricao))
                    {
                        <a href="@Model[x].Descricao">
                            <img src="@Model[x].CaminhoImagem" alt="" />
                        </a>
                    }
                    else
                    {
                        <a href="@Model[x].Descricao">
                            <img class="lazy" src="@Model[x].CaminhoImagem" alt="" />
                        </a>
                    }
                </div>
            </div>
        }
    }


    @if (Model.Count() > 0)
    {
        for (var x = 0; x < Model.Count(); x++)
        {
            <div class="slider-nava" id="slider-home">
                <a class="slider-nav-link" data-index="@x"></a>
            </div>
        }
    }
    
</section>

@section script {
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            var lazyImages = document.querySelectorAll('img.lazy');
            var observer = new IntersectionObserver(function (entries) {
                entries.forEach(function (entry) {
                    if (entry.isIntersecting) {
                        var img = entry.target;
                        img.src = img.dataset.src;
                        img.classList.remove('lazy');
                        observer.unobserve(img);
                    }
                });
            });

            lazyImages.forEach(function (img) {
                observer.observe(img);
            });
        });
    </script>
}
